<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style type="text/css">
      <!--
        @import url(style.css);
      //-->
    </style>
    <title>KikainekoMocker Project Web Site</title>
  </head>
  <body>
    <a name="Top"></a>
    <div id="wrapper">
    
      <div id="header">
        <img class="kikaineko" src="img/kikaineko_top.png" alt="KikainekoMocker Project Web Site"/>
        <p class="language"><a href="en/index.html">English</a></p>
      </div>　<!-- end of header section -->
      
      <div id="main">
      <h1>KikainekoMocker</h1>
      <h1>Java</h1>
      <h1>Mock</h1>
      <h1>機械猫モッカー</h1>
      <h1>モック</h1>
      
      <div id="left">
        
        <span id="title">モッカーが動<span class="orange">か</span>ないときの対処方法</span>
          <div class="desc">
          <p>ここでは、機械猫モッカーを使おうとしたけど「上手く動かない！！」という場合の対処方法を記述します。</p>
          </div>  <!-- end of desc section -->
        
        <h3><span class="orange">目</span>次</h3>
          <div class="desc">
            <ul>
              <li><a href="#shoujou">どんな症状がでてますか？</a></li>
              <li><a href="#install">インストール対処法</a></li>
              <li><a href="#shinogi">それでも動かない場合</a></li>
            </ul>
          </div>  <!-- end of desc section -->
        
        
        <a name="shoujou"></a>
        <h2>どんな<span class="orange">症</span>状がでてますか？</h2>
        <div class="desc">
          <p>
          ここではモッカーが動かない状態から対初方法を見ていきましょう。以下の症状に該当するリンク先に飛んでください。
          </p>
          <ul>
              <li><a href="#notfound">Testクラスを右クリックしても「機械猫モッカー」が出ない！</a></li>
              <li><a href="#error">機械猫モッカーの実行中にエラーが起きる！</a></li>
              <li><a href="#red">機械猫モッカーの生成したクラスを実行してもレッドのままだ！</a></li>
            </ul>
        </div>  <!-- end of desc section -->
        
        <a name="notfound"></a>
        <h3>Testクラスを<span class="orange">右</span>クリックしても「機械猫モッカー」が出ない！</h3>
          <div class="desc">
            <p>
            この症状で最も多いのは、「Testクラス以外を右クリックしていた」というものです。
            </p>
            <font color="blue"><b>
            <ul>
            <li>対象のクラスの名前が「***Test」とTestという名前で終わっているかどうか確認してください</li>
            <li>対象のクラスが「TestCase」を継承しているかどうか確認してください</li>
            </ul>
            </b></font>
            </p>
            <p>
            Testクラスを正しく指定しているにも関わらず、「機械猫モッカー」が出てこない場合は、恐らく機械猫モッカーのインストールに失敗しています。<br/>
            以下のことを確認し＆試し見てください。
            </p>
            <p>
            <font color="blue"><b>★正しくpluginsフォルダーに配置されていますか？</b></font><br/>
            　・ダウンロードしたzipのまま配置していませんか？<br/>
            　　→zipを解凍したフォルダを配置してください。<br/>
            　・該当のpluginsに配置していますか？<br/>
            　　→複数のEclipseが存在する場合、間違ったpluginsに配置することがあります。
            </p>
            <p>
            <font color="blue"><b>★JDK、Eclipseのバージョンは古くないですか？</b></font><br/>
            　→機械猫モッカーはJDK1.4以上、Eclipse3.2を基本環境として検証しています。<br/>
            　　ただEclipse3.1でも動作可能であることは確認していますが、Eclipse2以前の環境では恐らくpluginが正しく動作しません。<br/>
            　　その場合はすいませんが、JDK、Eclipseともにバージョンをあげてください。<br/>
            </p>
            <p>
            それでも上手くいかない場合は、<a href="#install">インストール対処法</a>を試してみてください。
            </p>
          </div>  <!-- end of desc section -->
        
        <a name="error"></a>
        <h3>機械猫<span class="orange">モ</span>ッカーの実行中にエラーが起きる！</h3>
          <div class="desc">
            <p>
            このような症状が起きる原因は、大きく2つに分けるとplugin側の原因である場合とテストケースの記述が妥当ではない場合です。
            </p>
            <p>
            <font color="blue"><b>★テストケースの記述が妥当でない</b></font><br/>
            テストケースの記述に関してはモッカーの制約などを参照し、修正してください。
            記述が許されていないテストケースの書き方を行うと、例外が発生し処理が中断されますので、注意してください。<br/>
            あるいは、間違ってテストケースを保存しないまま実行していないか確認してください。<br/>
            <br/>
            <font color="blue"><b>★plugin側が原因</b></font><br/>
            pulgin側が原因である場合、多くの場合は正しくインストールされていないことが原因です。<br/>
            <a href="#install">インストール対処法</a>を試してみてください。
            </p>
          </div>  <!-- end of desc section -->
          
          
        <a name="red"></a>
        <h3>機械猫<span class="orange">モ</span>ッカーの生成したクラスを実行してもレッドのままだ！</h3>
          <div class="desc">
            <p>
            この症状の最も多いパターンは、JUnitのassertEqualsの実装が原因の場合です。
            その他の原因としては、モッカーが正しくコードを生成できなかった場合とに分かれます。<br/>
            あるいは、モッカーが生成したコードがEclipseに正しく反映されていない場合もあります。
            </p>
            <p>
            <font color="blue"><b>★JUnitが原因</b></font><br/>
            JUnitのassertEqualsの実装が原因の場合というのは、モッカーが生成した擬似クラスは正しく動作しているけれどもテストが失敗する場合です。<br/>
            これはassertEqualsにオブジェクト型のデータを突っ込んだ際に起こります。
            デフォルトのassertEqualsの実装では引数がオブジェクト型の場合、単純にオブジェクト型のequalsメソッドを呼び出すだけです。
            そして、デフォルトのequalsメソッドの実装はhashCodeの比較を行っているだけですので、通常equalsメソッドをオーバーライドしていないオブジェクトは失敗します。<br/>
            これを回避することはできません。テストケースを書き換えるか、何とかしてequalsメソッドを書き換えるかする必要があります。
            あるいは、Testはredのままでも問題なくオブジェクトを生成していますので、redを無視したまま擬似クラスを使用することもできます。
            </p>
            <p>
            <font color="blue"><b>★モッカーが原因</b></font><br/>
            モッカーはまれに何のエラーも出力せずに正しく動作しないコードを生成することがあります。<br/>
            これは、モッカーが許可していないテストの記述を行っている場合に起こります。モッカーが許可していないテストの記述は多くの場合モッカーがエラーであることを通知しますが
            まれに、エラーが起きず解析が通ってしまうことがあります。これはモッカーがコード生成速度を確保するためにあまり厳密なチェックを行っていないためです。
            </p>
            <p>
            <font color="blue"><b>★Eclipseに正しく反映されていない場合</b></font><br/>
            プロジェクトを再ビルドしてください。（F5のショートカットがありますね）
            </p>
          </div>  <!-- end of desc section -->
          
        <a name="install"></a>
        <h2>イン<span class="orange">ス</span>トール対処法</h2>
          <div class="desc">
            <p>
            インストールに失敗した場合の多くは、バージョンの古いモッカーへの参照が残っている場合です。<br/>
            まずはプロジェクトに古い参照が残っていないか確認してください。
            </p>
            <p>
            そして、以下の方法でEclipseを起動してください。<br/>
            <ol>
            <li>eclipse.exeを右クリックし、eclipse.exeへのショートカットを作成します</li>
            <li>作成したショートカットのプロパティを開きます</li>
            <li>プロパティの中のリンク先に「-clean」を追記します。（例：「C:\eclipse\eclipse.exe -clean」）</li>
            <li>ショートカットをダブルクリックしてEclipseを起動します</li>
            </ol>
            </p>
            <p>まぁ早い話が、「-clean」を付けてExlipseを起動するだけなんですが…</p>
          </div>  <!-- end of desc section -->
          
        <a name="shinogi"></a>
        <h2>それでも<span class="orange">動</span>かない場合</h2>
          <div class="desc">
            <p>
            どうしても動かない場合は、恐らくプラグイン側のバグです。
            この場合はMLで質問していただくか開発者の<a href="http://d.hatena.ne.jp/kikaineko">ブログ</a>に書き込むかしてコンタクトしてださい。
            </p>
            <p>
            また問題が解決するまではすいませんがplugin側からの呼び出しを避け、<a href="userguide.html#TextUI">テキストUIから呼び出す方法</a>を試しください。
            </p>
          </div>  <!-- end of desc section -->

      </div> <!-- end of left section -->
      
      <div id="right">
        <h2>Conte<span class="orange">n</span>ts</h2>
        <div class="desc">
          <ul>
            <li><a href="index.html">ホーム</a></li>
            <li><a href="introduction.html">何ができるのか</a></li>
            <li><a href="userguide.html">どのように使うのか</a></li>
            <li><a href="techoverview.html">どのように動いているのか</a></li>
            <li><a href="http://sourceforge.jp/projects/kikainekomocker/files/">ダウンロード</a></li>
          </ul>
        </div>
      </div>  <!-- end of right section -->
      
      </div> <!-- end of main section -->
 
      <div id="footer">
        &copy;Copyright 2006 The Seasar Foundation.&nbsp;&nbsp;All rights reserved.
      </div>
      
    </div>
  </body>
</html>
